# ESP32 Flight Controller  

I have chosen ESP32 as a flight controller mainly because of its cost, WiFi & BLE capabilities, and 80MHz clock speed, which is 5 times faster than Arduino.  

## Code Files  

1. **Anglemode_flightcontroller_ver3**  
   - This is the complete code for the ESP32 flight controller. You may need to upload additional libraries in your Arduino IDE. Before uploading the code to the ESP32, keep the quadcopter on a spirit-level surface. After uploading, allow an initial 10 seconds calibration time for the quadcopter's Gyro. Once you observe 2 LED blinks on pin 15, the quadcopter is ready for flight.  

2. **receiver_pwm_esp32**  
   - This code is used to independently test the receiver & transmitter signals on the serial monitor. Connect the receiver to the ESP32 board as mentioned in the schematic.  

3. **measure_angles_mpu**  
   - This is an IMU angle checker. Connect the IMU to the ESP32 via the I2C protocol as specified in the schematic.  

4. **Motors calibration**  
   - Use this code to calibrate the motor's ESCs before the flight. This ensures that all motors start simultaneously. Follow the proper ESC calibration procedure while using this code.  

5. **Voltage measurement esp32**  
   - This code measures the voltage level of the LiPo 11V battery. You may need to adjust the code to match the actual resistor values used in your circuit.  

---

## Testing  

Before attempting flight, ensure all components are functioning correctly by testing them individually using the codes provided in the **testing folder**:  

- Use **receiver_pwm_esp32** to verify the signals from the receiver and transmitter.  
- Use **measure_angles_mpu** to confirm the IMU is measuring angles accurately.  
- Use **Motors calibration** to ensure all ESCs and motors are properly synchronized.  
- Use **Voltage measurement esp32** to validate the voltage sensing circuit.  

---

## Flying  

Before flying the drone, follow these steps:  

1. **IMU Calibration**  
   - Run the calibration code from the **calibration folder** to calibrate the IMU. Ensure the quadcopter is on a level surface during this process.  
   - Record the calibrated values generated by the calibration code.  

2. **Update the Main Flight Code**  
   - Enter the calibrated IMU values into the **Anglemode_flightcontroller_ver3.1** code. Update the relevant sections in the code with these values before uploading it to the ESP32.  

3. **Prepare for Flight**  
   - Double-check motor rotations and propeller orientations as per the schematic.  
   - Ensure all connections are secure.  
   - Perform an initial outdoor test for safety.  

---

## Safety First  

The quadcopter motors and propellers possess significant destructive energy. Always:  
- Conduct initial tests outdoors.  
- Verify that all propellers are installed in the correct direction and that motor rotations match the schematic.  
- Recheck motor and propeller functionality before uploading the main flight code.  

---

## YouTube Video Links  

- [Assembly and Calibration](https://youtu.be/BcPTe-hTJGc?si=5ig9wEDCqvCX-sgO)  
- [Flight Demonstration](https://www.youtube.com/watch?v=TmAVuMhu9no)  
